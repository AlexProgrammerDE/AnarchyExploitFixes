package me.moomoo.anarchyexploitfixes.commands;

import me.moomoo.anarchyexploitfixes.AnarchyExploitFixes;

import java.util.ArrayList;
import java.util.List;

public interface AnarchyExploitFixesCommand {

    boolean shouldRegister();

    static void registerCommands() {
        try {
            CommandManager commandManager = new CommandManager();
            
            List<AnarchyExploitFixesCommand> allCommands = new ArrayList<>(4);
            allCommands.add(new AEFCommand());
            allCommands.add(new HelpCommand());
            allCommands.add(new SayCommand());
            allCommands.add(new ToggleConnectionMsgsCommand());

            allCommands.forEach(toParse -> {
                if (toParse.shouldRegister()) commandManager.parser().parse(toParse);
            });
        } catch (Exception e) {
            AnarchyExploitFixes.getLog().severe("Failed to create command manager! - " + e.getLocalizedMessage());
            AnarchyExploitFixes plugin = AnarchyExploitFixes.getInstance();
            plugin.getServer().getPluginManager().disablePlugin(plugin);
        }
    }
}