package me.moomoo.anarchyexploitfixes.utils;

import me.moomoo.anarchyexploitfixes.AnarchyExploitFixes;
import org.apache.commons.math3.util.FastMath;
import org.bukkit.Location;
import org.bukkit.World;

public class LocationUtil {

    public static double getFlatDistanceTo00(Location location) {
        return FastMath.hypot(location.x(), location.z());
    }

    public static double getFlatDistance(Location from, Location to) {
        double toX = to.x();
        double toZ = to.z();
        double fromX = from.x();
        double fromZ = from.z();

        final World.Environment toEnv = to.getWorld().getEnvironment();
        final World.Environment fromEnv = from.getWorld().getEnvironment();
        if (!toEnv.equals(fromEnv)) {
            if (fromEnv.equals(World.Environment.NETHER)) {
                fromX *= 8;
                fromZ *= 8;
            }
            if (toEnv.equals(World.Environment.NETHER)) {
                toX *= 8;
                toZ *= 8;
            }
        }

        return FastMath.hypot(toX - fromX, toZ - fromZ);
    }

    public static boolean isNetherCeiling(Location location) {
        return location.getWorld().getEnvironment().equals(World.Environment.NETHER)
                && location.y() > AnarchyExploitFixes.getConfiguration().nether_ceiling_max_y;
    }
}
